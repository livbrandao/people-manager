import React, { useState } from "react";
import { useNavigate, useLocation } from "react-router-dom";

const SidebarIcon = ({ icon, isSelected, badge }) => (
  <div className="flex gap-4 my-3 mx-3.5 ">
    <div
      className={`relative flex justify-center items-center p-2 rounded-md $
          text-blue-400 ${
            isSelected ? "bg-white" : "bg-white bg-opacity-60 hover:bg-white"
          }`}
    >
      {icon}
      {badge && (
        <div className="absolute -right-2 -bottom-2 bg-white p-1 rounded-md">
          <svg
            width="9"
            height="12"
            viewBox="0 0 9 12"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M6.16693 5.61719V6.20946C6.16693 6.34907 6.05331 6.46329 5.91445 6.46329H2.37974C2.24087 6.46329 2.12726 6.34907 2.12726 6.20946V5.61719C2.12726 5.47758 2.24087 5.36336 2.37974 5.36336H5.91445C6.05331 5.36336 6.16693 5.47758 6.16693 5.61719ZM5.91445 7.14018H2.37974C2.24087 7.14018 2.12726 7.2544 2.12726 7.39401V7.98628C2.12726 8.12589 2.24087 8.24011 2.37974 8.24011H5.91445C6.05331 8.24011 6.16693 8.12589 6.16693 7.98628V7.39401C6.16693 7.2544 6.05331 7.14018 5.91445 7.14018ZM8.18676 3.16137V10.1862C8.18676 10.7467 7.7344 11.2015 7.17684 11.2015H1.11734C0.559781 11.2015 0.107422 10.7467 0.107422 10.1862V1.38666C0.107422 0.826119 0.559781 0.371338 1.11734 0.371338H5.41159C5.6788 0.371338 5.93549 0.479216 6.12485 0.66959L7.8901 2.44429C8.07946 2.63255 8.18676 2.89273 8.18676 3.16137ZM5.49365 1.46916V3.07887H7.09479L5.49365 1.46916ZM7.17684 10.1862V4.0942H4.98869C4.70886 4.0942 4.48373 3.86787 4.48373 3.58654V1.38666H1.11734V10.1862H7.17684Z"
              fill="#649FBF"
            />
          </svg>
        </div>
      )}
    </div>
  </div>
);

const SidebarIcons = () => {
  const navigate = useNavigate();
  const location = useLocation();

  const routeToIconMap = {
    "/": 0,
    "/coming-soon": 1,
  };

  const getCurrentSelectedIcon = () => {
    return routeToIconMap[location.pathname] ?? 0;
  };

  const [selectedIcon, setSelectedIcon] = useState(getCurrentSelectedIcon());

  const icons = [
    {
      id: 0,
      name: "Prédio",
      route: "/",
      icon: (
        <svg
          width="19"
          height="22"
          viewBox="0 0 19 22"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M5.42857 6.35938V4.64062C5.42857 4.35703 5.65759 4.125 5.9375 4.125H7.63393C7.91384 4.125 8.14286 4.35703 8.14286 4.64062V6.35938C8.14286 6.64297 7.91384 6.875 7.63393 6.875H5.9375C5.65759 6.875 5.42857 6.64297 5.42857 6.35938ZM11.3661 6.875H13.0625C13.3424 6.875 13.5714 6.64297 13.5714 6.35938V4.64062C13.5714 4.35703 13.3424 4.125 13.0625 4.125H11.3661C11.0862 4.125 10.8571 4.35703 10.8571 4.64062V6.35938C10.8571 6.64297 11.0862 6.875 11.3661 6.875ZM5.9375 11H7.63393C7.91384 11 8.14286 10.768 8.14286 10.4844V8.76562C8.14286 8.48203 7.91384 8.25 7.63393 8.25H5.9375C5.65759 8.25 5.42857 8.48203 5.42857 8.76562V10.4844C5.42857 10.768 5.65759 11 5.9375 11ZM11.3661 11H13.0625C13.3424 11 13.5714 10.768 13.5714 10.4844V8.76562C13.5714 8.48203 13.3424 8.25 13.0625 8.25H11.3661C11.0862 8.25 10.8571 8.48203 10.8571 8.76562V10.4844C10.8571 10.768 11.0862 11 11.3661 11ZM8.14286 14.6094V12.8906C8.14286 12.607 7.91384 12.375 7.63393 12.375H5.9375C5.65759 12.375 5.42857 12.607 5.42857 12.8906V14.6094C5.42857 14.893 5.65759 15.125 5.9375 15.125H7.63393C7.91384 15.125 8.14286 14.893 8.14286 14.6094ZM11.3661 15.125H13.0625C13.3424 15.125 13.5714 14.893 13.5714 14.6094V12.8906C13.5714 12.607 13.3424 12.375 13.0625 12.375H11.3661C11.0862 12.375 10.8571 12.607 10.8571 12.8906V14.6094C10.8571 14.893 11.0862 15.125 11.3661 15.125ZM19 20.4531V22H0V20.4531C0 20.1695 0.229018 19.9375 0.508929 19.9375H1.33594V1.03125C1.33594 0.459766 1.78973 0 2.35379 0H16.6462C17.2103 0 17.6641 0.459766 17.6641 1.03125V19.9375H18.4911C18.771 19.9375 19 20.1695 19 20.4531ZM3.37165 19.8945H8.14286V17.0156C8.14286 16.732 8.37187 16.5 8.65179 16.5H10.3482C10.6281 16.5 10.8571 16.732 10.8571 17.0156V19.8945H15.6283V2.10547L3.39286 2.0625L3.37165 19.8945Z"
            fill="#649FBF"
          />
        </svg>
      ),
    },
    {
      id: 1,
      name: "Editar",
      route: "/coming-soon",
      icon: (
        <svg
          width="21"
          height="18"
          viewBox="0 0 21 18"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M14.335 2.88147L17.5467 6.00913C17.682 6.1409 17.682 6.35588 17.5467 6.48764L9.7703 14.0606L6.46606 14.4178C6.02455 14.4663 5.65068 14.1022 5.70053 13.6723L6.06727 10.4544L13.8436 2.88147C13.9789 2.74971 14.1997 2.74971 14.335 2.88147ZM20.1032 2.08742L18.3656 0.395292C17.8244 -0.131764 16.9449 -0.131764 16.4002 0.395292L15.1397 1.62278C15.0044 1.75454 15.0044 1.96953 15.1397 2.10129L18.3514 5.22895C18.4867 5.36071 18.7074 5.36071 18.8427 5.22895L20.1032 4.00147C20.6444 3.47094 20.6444 2.61448 20.1032 2.08742ZM13.6727 12.0009V15.5308H2.27879V4.4349H10.4611C10.575 4.4349 10.6818 4.38982 10.7637 4.31354L12.188 2.92655C12.4586 2.66302 12.2663 2.21572 11.8853 2.21572H1.70909C0.76553 2.21572 0 2.96122 0 3.8801V16.0856C0 17.0045 0.76553 17.75 1.70909 17.75H14.2424C15.186 17.75 15.9515 17.0045 15.9515 16.0856V10.6139C15.9515 10.2429 15.4922 10.0591 15.2216 10.3192L13.7973 11.7062C13.719 11.7859 13.6727 11.89 13.6727 12.0009Z"
            fill="#649FBF"
          />
        </svg>
      ),
    },
    {
      id: 2,
      name: "Organograma",
      route: "/coming-soon",
      icon: (
        <svg
          width="22"
          height="18"
          viewBox="0 0 22 18"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M17.4015 12.2635H20.6643C21.2649 12.2635 21.752 12.7628 21.752 13.3784V16.723C21.752 17.3386 21.2649 17.8379 20.6643 17.8379H17.4015C16.801 17.8379 16.3139 17.3386 16.3139 16.723V13.3784C16.3139 12.7628 16.801 12.2635 17.4015 12.2635ZM18.2172 9.47637H11.6916V11.1487H10.0602V9.47637H3.5346V11.1487H1.90319V9.14226C1.90319 8.40471 2.4888 7.80407 3.20865 7.80407H10.0602V5.57434H8.70071C8.10015 5.57434 7.61311 5.07509 7.61311 4.45947V1.11487C7.61311 0.499252 8.10015 0 8.70071 0H13.0511C13.6517 0 14.1387 0.499252 14.1387 1.11487V4.45947C14.1387 5.07509 13.6517 5.57434 13.0511 5.57434H11.6916V7.80407H18.5432C19.263 7.80407 19.8486 8.40436 19.8486 9.14226V11.1487H18.2172V9.47637ZM9.24451 12.2635H12.5073C13.1079 12.2635 13.5949 12.7628 13.5949 13.3784V16.723C13.5949 17.3386 13.1079 17.8379 12.5073 17.8379H9.24451C8.64395 17.8379 8.15691 17.3386 8.15691 16.723V13.3784C8.15691 12.7628 8.64395 12.2635 9.24451 12.2635ZM1.08749 12.2635H4.3503C4.95086 12.2635 5.4379 12.7628 5.4379 13.3784V16.723C5.4379 17.3386 4.95086 17.8379 4.3503 17.8379H1.08749C0.486929 17.8379 -0.000114441 17.3386 -0.000114441 16.723V13.3784C-0.000114441 12.7628 0.486929 12.2635 1.08749 12.2635Z"
            fill="#649FBF"
          />
        </svg>
      ),
    },
    {
      id: 3,
      name: "Notificação",
      route: "/coming-soon",
      icon: (
        <svg
          width="19"
          height="22"
          viewBox="0 0 19 22"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M18.6339 15.5671C17.8145 14.6751 16.2814 13.3332 16.2814 8.9375C16.2814 5.59883 13.9708 2.92617 10.8553 2.27047V1.375C10.8553 0.615742 10.248 0 9.49905 0C8.75008 0 8.14276 0.615742 8.14276 1.375V2.27047C5.02727 2.92617 2.71673 5.59883 2.71673 8.9375C2.71673 13.3332 1.18358 14.6751 0.364209 15.5671C0.109745 15.8443 -0.00306778 16.1756 -0.00094724 16.5C0.00371794 17.2047 0.549544 17.875 1.36044 17.875H17.6377C18.4486 17.875 18.9948 17.2047 18.9991 16.5C19.0012 16.1756 18.8884 15.8439 18.6339 15.5671ZM2.86305 15.8125C3.763 14.6107 4.74693 12.6186 4.7516 8.96242C4.7516 8.95383 4.74905 8.94609 4.74905 8.9375C4.74905 6.27945 6.87553 4.125 9.49905 4.125C12.1226 4.125 14.2491 6.27945 14.2491 8.9375C14.2491 8.94609 14.2465 8.95383 14.2465 8.96242C14.2512 12.6191 15.2351 14.6111 16.1351 15.8125H2.86305ZM9.49905 22C10.997 22 12.2121 20.7689 12.2121 19.25H6.78604C6.78604 20.7689 8.00111 22 9.49905 22Z"
            fill="#649FBF"
          />
        </svg>
      ),
      badge: true,
    },
    {
      id: 4,
      name: "Histórico",
      route: "/coming-soon",
      icon: (
        <svg
          width="17"
          height="18"
          viewBox="0 0 17 18"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M16.7801 8.58416C16.7887 13.3227 13.0188 17.1975 8.39616 17.2008C6.39963 17.2023 4.56572 16.4888 3.12456 15.2965C2.74981 14.9865 2.7218 14.4108 3.06234 14.0617L3.44352 13.671C3.73477 13.3724 4.19974 13.3398 4.52242 13.6022C5.5842 14.4659 6.92794 14.9814 8.39007 14.9814C11.8309 14.9814 14.615 12.1269 14.615 8.60042C14.615 5.07338 11.8303 2.21946 8.39007 2.21946C6.73865 2.21946 5.23876 2.87729 4.12508 3.95106L5.84213 5.71117C6.18315 6.06073 5.94163 6.65839 5.4594 6.65839H0.541295C0.242331 6.65839 0 6.40998 0 6.10352V1.06212C0 0.567801 0.583043 0.320227 0.924058 0.669758L2.59436 2.38194C4.10062 0.906373 6.14208 0 8.39007 0C13.0185 0 16.7716 3.84175 16.7801 8.58416ZM10.6597 11.3163L10.992 10.8783C11.2674 10.5155 11.2036 9.99255 10.8496 9.71036L9.47267 8.61252V4.99379C9.47267 4.53412 9.10915 4.16149 8.66072 4.16149H8.11943C7.671 4.16149 7.30748 4.53412 7.30748 4.99379V9.69805L9.52033 11.4623C9.87431 11.7445 10.3844 11.6792 10.6597 11.3163Z"
            fill="#649FBF"
          />
        </svg>
      ),
    },
    {
      id: 5,
      name: "Perfil",
      route: "/coming-soon",
      icon: (
        <svg
          width="17"
          height="20"
          viewBox="0 0 17 20"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M8.39008 9.55601C11.0382 9.55601 13.1844 7.4171 13.1844 4.778C13.1844 2.1389 11.0382 0 8.39008 0C5.74196 0 3.59575 2.1389 3.59575 4.778C3.59575 7.4171 5.74196 9.55601 8.39008 9.55601ZM11.7461 10.7505H11.1206C10.2891 11.1313 9.36393 11.3478 8.39008 11.3478C7.41623 11.3478 6.49482 11.1313 5.65956 10.7505H5.03405C2.25483 10.7505 0 12.9977 0 15.7674V17.3203C0 18.3095 0.805298 19.112 1.79787 19.112H14.9823C15.9749 19.112 16.7802 18.3095 16.7802 17.3203V15.7674C16.7802 12.9977 14.5253 10.7505 11.7461 10.7505Z"
            fill="#649FBF"
          />
        </svg>
      ),
    },
  ];

  const handleIconClick = (id, route) => {
    setSelectedIcon(id);
    navigate(route);
  };

  return (
    <div className="flex flex-col h-screen">
      <div className="flex flex-col">
        {icons.map((icon) => (
          <div
            key={icon.id}
            className="relative cursor-pointer"
            onClick={() => handleIconClick(icon.id, icon.route)}
          >
            {/* Barra lateral indicadora quando selecionado */}
            {selectedIcon === icon.id && (
              <div className="absolute left-0 top-0 w-1 h-10 bg-white mt-3"></div>
            )}

            <SidebarIcon
              icon={icon.icon}
              isSelected={selectedIcon === icon.id}
              badge={icon.badge}
            />
          </div>
        ))}
      </div>
    </div>
  );
};

export default SidebarIcons;
